{% extends 'base/index.html' %}
{% block title %}
    <title>文章修改</title>
{% endblock %}

{% block page-content %}
    <div>
        <form method="post" action="/articles/edit/{{ aid }}">
            {% csrf_token %}
            <div class="form-group">
                <label>文章标题</label>
                <input type="text" class="form-control" name="title" value="{{ article.title }}" placeholder="文章标题" >
            </div>
            <div class="form-group">
                <label>文章内容</label>
                <textarea class="form-control" id="editor_id" name="content" >
                    {{ article.content }}
                </textarea>

            </div>
            <div class="form-group">
                <label>发布者</label><br>

                <select class="form-control" style="width:100px" name="user_id">
                    {% for user in user_all %}
                        {% if article.user_id == user.id %}
                            <option selected value="{{ user.id }}">{{ user.username }}</option>
                        {% else %}
                            <option value="{{ user.id }}">{{ user.username }}</option>
                        {% endif %}
                    {% endfor %}
                </select>


            </div>
            <input type="submit" class="btn btn-primary pull-right" value="修改" />
        </form>
    </div>
{% endblock %}

{% block extra-bottom-js %}
    <script src="/static/dropzone/dropzone.js"></script>
    <script charset="utf-8" src="/static/kindeditor/kindeditor-all-min.js"></script>
    <script charset="utf-8" src="/static/kindeditor/lang/zh-CN.js"></script>
    <script>
        var editor;
        KindEditor.ready(function(K) {
                editor = K.create('#editor_id',{
                    resizeType:0,           //是否能改变宽度和长度
                    //filterMode: true,     //是否过滤标签
                    width : '100%',
                    height:'300px',
                    items:[
        'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',
        'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|', 'image', 'multiimage',
        'flash', 'media', 'insertfile', 'table', 'hr', 'emoticons', 'baidumap', 'pagebreak',
        'anchor', 'link', 'unlink', '|'],      //编辑框的功能栏
                    uploadJson:'/submitComment',
                    //htmlTags :[]      //自定义不需要过滤标签
                });
        });
    </script>
{% endblock %}